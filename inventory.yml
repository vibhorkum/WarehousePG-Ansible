all:
  vars:
    # ============================================================
    # SSH Configuration - Update these values for your environment
    # ============================================================
    ansible_user: rocky  # Change to your SSH user (ec2-user, ubuntu, rocky, etc.)
    ansible_ssh_private_key_file: ~/.ssh/id_rsa  # Path to your private key
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
    
    # Connection timeouts (recommended for cloud environments)
    ansible_connect_timeout: 30
    ansible_command_timeout: 600  # For long-running operations like gpinitsystem
    
  children:
    whpg_primary_site:
      children:
        whpg_primary_coordinator:
          hosts:
            whpg-coordinator:
              ansible_host: 3.22.42.68      # Public IP for SSH connection
              private_ip: 10.0.2.40          # Private IP for replication (REQUIRED for DR)
              hostname: whpg-coordinator
        
        # Primary segment servers
        # Add as many segment servers as needed for your cluster
        # Total segments = (number of servers) Ã— (length of whpg_data_directories)
        # Example: 3 servers with 2 data directories = 6 segment instances
        whpg_primary_segments:
          hosts:
            whpg-segment:
              ansible_host: 18.226.172.107   # Public IP for SSH connection
              private_ip: 10.0.9.61          # Private IP for replication (REQUIRED for DR)
              hostname: whpg-segment
            
            # Add more segment servers as needed:
            # whpg-segment2:
            #   ansible_host: 18.226.172.108
            #   private_ip: 10.0.9.62
            #   hostname: whpg-segment2
            # 
            # whpg-segment3:
            #   ansible_host: 18.226.172.109
            #   private_ip: 10.0.9.63
            #   hostname: whpg-segment3
            # 
            # whpg-segment4:
            #   ansible_host: 18.226.172.110
            #   private_ip: 10.0.9.64
            #   hostname: whpg-segment4

    whpg_dr_site:
      children:
        whpg_dr_coordinator:
          hosts:
            dr-coordinator:
              ansible_host: 210.0.0.4        # Public IP for SSH connection
              private_ip: 10.0.10.40         # Private IP for replication (REQUIRED)
              hostname: dr-coordinator
              upstream_cluster: whpg_primary_site
              replication_slot: dr-coordinator
              restore_command: "rsync -a /mnt/wal_archive/whpg-coordinator/%f \"%p\""
              
        # DR segment servers (for mirrors when using whpg_use_dr_site_mirrors)
        # Should match the number and configuration of primary segments
        whpg_dr_segments:
          hosts:
            dr-segment:
              ansible_host: 210.0.0.1        # Public IP for SSH connection
              private_ip: 10.0.12.61         # Private IP for replication (REQUIRED)
              hostname: dr-segment
              upstream_segment: whpg-segment
              replication_slot: dr-segment
              restore_command: "rsync -a /mnt/wal_archive/whpg-segment/%f \"%p\""
            
            # Add DR segment servers to match primary segment count:
            # dr-segment2:
            #   ansible_host: 210.0.0.2
            #   private_ip: 10.0.12.62
            #   hostname: dr-segment2
            #   upstream_segment: whpg-segment2
            #   replication_slot: dr-segment2
            #   restore_command: "rsync -a /mnt/wal_archive/whpg-segment2/%f \"%p\""
            # 
            # dr-segment3:
            #   ansible_host: 210.0.0.3
            #   private_ip: 10.0.12.63
            #   hostname: dr-segment3
            #   upstream_segment: whpg-segment3
            #   replication_slot: dr-segment3
            #   restore_command: "rsync -a /mnt/wal_archive/whpg-segment3/%f \"%p\""
