---
# Default variables for WarehousePG Failover Role

# Failover mode: 'planned' or 'unplanned'
# planned: Graceful failover with data sync verification
# unplanned: Emergency failover when primary is unavailable
whpg_failover_mode: planned

# Pre-failover checks
whpg_failover_verify_replication_lag: true
whpg_failover_max_lag_mb: 10
whpg_failover_verify_connectivity: true

# Post-failover actions
whpg_failover_update_dns: false
whpg_failover_notify_applications: false

# Coordinator configuration
whpg_coordinator_port: 5432
whpg_coordinator_data_directory: /data/coordinator/gpseg-1

# Segment data directories - used for DR takeover cleanup
# These should match your DR site's mirror directories
whpg_mirror_data_directories:
  - "/data/mirror/seg1"
  - "/data/mirror/seg2"

# Base directory
whpg_base_dir: "/usr/local/greenplum-db-{{ whpg_version | default('7.3.0') }}-WHPG"

# Timeout settings (seconds)
whpg_failover_timeout: 300
whpg_startup_timeout: 120

# Safety settings
whpg_failover_force: false
whpg_failover_skip_checks: false

# DR Site takeover - when true, stops primary site segments to force DR mirrors to become primaries
# This ensures all data processing happens on the DR site after failover
whpg_failover_dr_takeover: true
