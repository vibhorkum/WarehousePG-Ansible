---
# Default variables for WarehousePG Failover Role
#
# This role uses the correct Greenplum DR workflow:
#   1. gpactivatestandby - Promotes DR coordinator
#   2. FTS auto-failover - Segments are handled automatically
#   3. gprecoverseg - Used ONLY for recovery (after failover)

# ============================================================================
# Failover Mode
# ============================================================================
# planned: Graceful failover - stops primary cluster first
# unplanned: Emergency failover when primary is unavailable
whpg_failover_mode: planned

# ============================================================================
# Pre-Failover Settings
# ============================================================================
# Skip all pre-flight checks
whpg_failover_skip_checks: false

# Force failover even if safety checks fail
whpg_failover_force: false

# ============================================================================
# Coordinator Configuration
# ============================================================================
whpg_coordinator_port: 5432
whpg_coordinator_data_directory: /data/coordinator/gpseg-1

# Base directory for Greenplum installation
whpg_base_dir: "/usr/local/greenplum-db-{{ whpg_version | default('7.3.0') }}-WHPG"

# ============================================================================
# FTS (Fault Tolerance Service) Settings
# ============================================================================
# Time to wait for FTS to automatically failover segments (seconds)
# FTS typically completes within 30-60 seconds
whpg_fts_wait_timeout: 120

# Initial wait before checking FTS status (allows FTS to detect failures)
whpg_fts_initial_wait: 30

# ============================================================================
# Timeout Settings
# ============================================================================
# Overall failover operation timeout (seconds)
whpg_failover_timeout: 300

# Timeout for cluster startup operations (seconds)
whpg_startup_timeout: 120

# ============================================================================
# Recovery Settings (used in post_failover_verify.yml)
# ============================================================================
# Whether to automatically attempt gprecoverseg after failover
# Set to false - recovery should be a deliberate operation
whpg_auto_recover_segments: false

# Use full recovery (-F flag) instead of incremental
# Full recovery is slower but more reliable
whpg_recovery_full_mode: false
